(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4f110caa"],{"17b3":function(t,e,a){},"6ca7":function(t,e,a){},"87fc":function(t,e,a){"use strict";a("cc1d")},bded:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{staticStyle:{"max-width":"1136px"}},[a("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),a("Navbar"),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"12"}},[a("div",{staticClass:"text-h4 font-weight-bold"},[t._v(t._s("/"===t.city?t.keyWord:t.city)+" "),a("span",{staticClass:"text-h5 font-weight-regular ml-4"},[t._v("共"+t._s(t.num)+"個結果")])])]),a("v-col",{staticClass:"d-none d-sm-flex flex-column",attrs:{cols:"12",sm:"3"}},[a("div",{staticClass:"text-h6 font-weight-bold"},[t._v("景點類別")]),a("v-checkbox",{attrs:{label:"旅遊",value:"旅遊"},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}}),a("v-checkbox",{staticClass:"mt-0",attrs:{label:"餐飲",value:"餐飲"},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}}),a("div",{staticClass:"text-h6 font-weight-bold"},[t._v("相關類別")]),t._l(t.aboutSelecte,(function(e,i){return a("div",{key:i},[a("v-checkbox",{attrs:{label:e,value:e},model:{value:t.aboutSelected,callback:function(e){t.aboutSelected=e},expression:"aboutSelected"}})],1)}))],2),a("v-row",{staticClass:"d-flex d-sm-none"},[a("v-dialog",{attrs:{persistent:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,n=e.attrs;return[a("v-col",{attrs:{cols:"12"}},[a("v-chip",t._g(t._b({staticClass:"ma-2",attrs:{color:"black",outlined:""}},"v-chip",n,!1),i),[t._v("景點類別"),a("v-icon",{attrs:{right:""}},[t._v("fas fa-angle-down")])],1),a("v-chip",t._g(t._b({staticClass:"ma-2",attrs:{color:"black",outlined:""}},"v-chip",n,!1),i),[t._v("相關類別"),a("v-icon",{attrs:{right:""}},[t._v("fas fa-angle-down")])],1)],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-col",{attrs:{cols:"12"}},[a("v-sheet",{staticClass:"pa-4 h-auto"},[a("v-row",{attrs:{align:"center"}},[a("v-col",{staticClass:"d-flex align-start",attrs:{cols:"12"}},[a("v-btn",{attrs:{color:"grey darken-1",icon:""},on:{click:function(e){t.dialog=!1}}},[a("v-icon",[t._v("fas fa-times")])],1)],1),a("v-col",{attrs:{cols:"12"}},[a("div",{staticClass:"text-h6 font-weight-bold"},[t._v("景點類別")]),a("v-checkbox",{attrs:{label:"旅遊",value:"旅遊"},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}}),a("v-checkbox",{staticClass:"mt-0",attrs:{label:"餐飲",value:"餐飲"},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}}),a("div",{staticClass:"text-h6 font-weight-bold"},[t._v("相關類別")]),t._l(t.aboutSelecte,(function(e,i){return a("div",{key:i},[a("v-checkbox",{attrs:{label:e,value:e},model:{value:t.aboutSelected,callback:function(e){t.aboutSelected=e},expression:"aboutSelected"}})],1)}))],2)],1)],1)],1)],1)],1),a("v-col",{attrs:{cols:"12",sm:"9"}},[t._l(t.viewData,(function(e){return a("v-card",{key:e.ID,staticClass:"rounded-lg mb-6",attrs:{outlined:""},on:{click:function(a){t.getScenicSpots(e.ScenicSpotID),t.getRestaurants(e.RestaurantID)}}},[a("div",{staticClass:"d-flex flex-no-wrap justify-start"},[a("div",[a("v-img",{staticClass:"rounded-tl-lg rounded-bl-lg",attrs:{src:e.Picture.PictureUrl1||t.availableImg,height:"200px",width:"200px"}})],1),a("div",[a("v-card-text",{staticClass:"primary--text py-2"},[t._v(t._s(t.getType(e.ScenicSpotID)||t.getType(e.RestaurantID)))]),a("v-card-title",{staticClass:"font-weight-bold pt-0 pb-8 text-h5"},[t._v(t._s(e.ScenicSpotName||e.RestaurantName))]),a("v-card-text",{staticClass:"py-0 text-body-1"},[a("i",{staticClass:"fas fa-map-marker-alt mr-1"}),t._v(t._s(e.Address)+" ")]),a("v-card-text",{staticClass:"py-4"},[t._v(t._s(t.getClass(e)))])],1)])])})),a("v-pagination",{staticClass:"w-100 mb-16",attrs:{length:t.pages,"total-visible":"7"},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}})],2)],1),a("Footer")],1)},n=[],s=(a("99af"),a("d3b7"),a("159b"),a("b64b"),a("caad"),a("2532"),a("4de4"),a("6c2d")),c=a("cea4"),o=a("9d10"),r={name:"SearchResult",components:{Navbar:c["a"],Footer:o["a"]},data:function(){return{dialog:!1,url:"",city:"",className:"",keyWord:"",data:[],selected:["旅遊","餐飲"],aboutSelecte:[],aboutSelected:[],page:1,pages:3,count:30,num:0,availableImg:"https://picsum.photos/200/200/?random=4",isLoading:!1}},methods:{getResult:function(){var t=this;if(t.isLoading=!0,""===t.className&&void 0!==t.keyWord){var e="https://ptx.transportdata.tw/MOTC/v2/Tourism/ScenicSpot".concat(t.city,"?$filter=Name%20eq%20'").concat(t.keyWord,"'&$format=JSON"),a="https://ptx.transportdata.tw/MOTC/v2/Tourism/Restaurant".concat(t.city,"?$filter=Name%20eq%20'").concat(t.keyWord,"'&$format=JSON"),i=function(){return t.$http.get(e,{headers:t.getAuthorizationHeader()})},n=function(){return t.$http.get(a,{headers:t.getAuthorizationHeader()})};t.$http.all([i(),n()]).then(t.$http.spread((function(e,a){t.data=e.data.concat(a.data),t.findClass(),t.pages=Math.ceil(t.data.length/t.count),t.isLoading=!1}))).catch((function(){})),t.selected=["旅遊","餐飲"]}else if(""!==t.className&&void 0!==t.className){var s="https://ptx.transportdata.tw/MOTC/v2/Tourism/".concat(t.className).concat(t.city,"?$filter=Name%20eq%20'").concat(t.keyWord,"'&$format=JSON");t.$http.get(s,{headers:t.getAuthorizationHeader()}).then((function(e){t.data=e.data,t.findClass(),t.pages=Math.ceil(t.data.length/t.count),t.isLoading=!1,"ScenicSpot"===t.className?t.selected=["旅遊"]:t.selected=["餐飲"]}))}else if(void 0===t.keyWord&&void 0===t.className){var c="https://ptx.transportdata.tw/MOTC/v2/Tourism/ScenicSpot/".concat(t.city,"?$format=JSON"),o="https://ptx.transportdata.tw/MOTC/v2/Tourism/Restaurant/".concat(t.city,"?$format=JSON"),r=function(){return t.$http.get(c,{headers:t.getAuthorizationHeader()})},l=function(){return t.$http.get(o,{headers:t.getAuthorizationHeader()})};t.$http.all([r(),l()]).then(t.$http.spread((function(e,a){t.data=e.data.concat(a.data),t.findClass(),t.pages=Math.ceil(t.data.length/t.count),t.isLoading=!1}))).catch((function(){})),t.selected=["旅遊","餐飲"]}},getScenicSpots:function(t){var e="https://ptx.transportdata.tw/MOTC/v2/Tourism/ScenicSpot?$filter=ScenicSpotID%20eq%20'".concat(t,"'&$format=JSON"),a=this;a.isLoading=!0,a.$http.get(e,{headers:a.getAuthorizationHeader()}).then((function(){a.isLoading=!1,a.$router.push("/scenePage/".concat(t)).catch((function(){}))}))},getRestaurants:function(t){var e="https://ptx.transportdata.tw/MOTC/v2/Tourism/Restaurant?$filter=ScenicSpotID%20eq%20'".concat(t,"'&$format=JSON"),a=this;a.isLoading=!0,a.$http.get(e,{headers:a.getAuthorizationHeader()}).then((function(){a.isLoading=!1,a.$router.push("/scenePage/".concat(t)).catch((function(){}))}))},getAuthorizationHeader:function(){var t="4f650471c3a946078042df58395fa922",e="rMjx-NyfKoXX93I7ZTe59VjoEPM",a=(new Date).toGMTString(),i=new s["a"]("SHA-1","TEXT");i.setHMACKey(e,"TEXT"),i.update("x-date: ".concat(a));var n=i.getHMAC("B64"),c='hmac username="'+t+'", algorithm="hmac-sha1", headers="x-date", signature="'+n+'"';return{Authorization:c,"x-date":a}},findClass:function(){var t=this,e=[];t.data.forEach((function(t){var a=Object.keys(t),i=[];a.forEach((function(t){t.includes("Class")&&i.push(t)})),i.forEach((function(a){e.push(t[a])}))})),e.length>0?(t.aboutSelecte=e.filter((function(t,a){return e.indexOf(t)===a})),t.aboutSelected=t.aboutSelecte):(t.aboutSelecte=["其他"],t.aboutSelected=t.aboutSelecte)},getType:function(t){var e;return e=-1!==t.indexOf("C1")||-1!==t.indexOf("C2")?"景點":"餐飲",e},getClass:function(t){var e="",a=Object.keys(t),i=a.filter((function(t){return t.includes("Class")}));return 0===i.length?e="其他":i.forEach((function(a){e+="".concat(t[a]," ")})),e}},computed:{viewData:function(){var t=this,e=[];return t.data.forEach((function(a){var i=Object.keys(a),n=i.filter((function(t){return t.includes("Class")}));n.length>0?t.selectedTranslate.length>0&&t.selectedTranslate.forEach((function(i){t.aboutSelected.forEach((function(t){n.forEach((function(n){(a.ScenicSpotID&&a.ScenicSpotID.includes(i)&&a[n]===t||a.RestaurantID&&a.RestaurantID.includes(i)&&a[n]===t)&&e.push(a)}))}))})):t.aboutSelecte.length>0&&0===n.length&&!0===t.otherChecker&&e.push(a)})),e=e.filter((function(t,a){return e.indexOf(t)===a})),t.num=e.length,t.pages=Math.ceil(e.length/t.count),e=e.filter((function(e,a){return a>=t.count*(t.page-1)&&a<t.count*t.page})),e},selectedTranslate:function(){var t=this,e=[];return t.selected.forEach((function(t){"旅遊"===t?e.push("C1_"):"餐飲"===t&&e.push("C3_")})),e},otherChecker:function(){var t=this;return!!t.aboutSelected.includes("其他")}},created:function(){this.city=this.$route.query.city,this.className=this.$route.query.class,this.keyWord=this.$route.query.key,this.getResult()}},l=r,u=(a("87fc"),a("2877")),h=a("6544"),d=a.n(h),f=a("8336"),p=a("b0af"),v=a("99d9"),g=a("15fd"),m=a("5530"),b=(a("25f0"),a("6ca7"),a("ec29"),a("9d26")),x=a("c37a"),S=a("fe09"),y=["title"],C=S["a"].extend({name:"v-checkbox",props:{indeterminate:Boolean,indeterminateIcon:{type:String,default:"$checkboxIndeterminate"},offIcon:{type:String,default:"$checkboxOff"},onIcon:{type:String,default:"$checkboxOn"}},data:function(){return{inputIndeterminate:this.indeterminate}},computed:{classes:function(){return Object(m["a"])(Object(m["a"])({},x["a"].options.computed.classes.call(this)),{},{"v-input--selection-controls":!0,"v-input--checkbox":!0,"v-input--indeterminate":this.inputIndeterminate})},computedIcon:function(){return this.inputIndeterminate?this.indeterminateIcon:this.isActive?this.onIcon:this.offIcon},validationState:function(){if(!this.isDisabled||this.inputIndeterminate)return this.hasError&&this.shouldValidate?"error":this.hasSuccess?"success":null!==this.hasColor?this.computedColor:void 0}},watch:{indeterminate:function(t){var e=this;this.$nextTick((function(){return e.inputIndeterminate=t}))},inputIndeterminate:function(t){this.$emit("update:indeterminate",t)},isActive:function(){this.indeterminate&&(this.inputIndeterminate=!1)}},methods:{genCheckbox:function(){var t=this.attrs$,e=(t.title,Object(g["a"])(t,y));return this.$createElement("div",{staticClass:"v-input--selection-controls__input"},[this.$createElement(b["a"],this.setTextColor(this.validationState,{props:{dense:this.dense,dark:this.dark,light:this.light}}),this.computedIcon),this.genInput("checkbox",Object(m["a"])(Object(m["a"])({},e),{},{"aria-checked":this.inputIndeterminate?"mixed":this.isActive.toString()})),this.genRipple(this.setTextColor(this.rippleState))])},genDefaultSlot:function(){return[this.genCheckbox(),this.genLabel()]}}}),k=a("cc20"),$=a("62ad"),I=a("a523"),_=a("169a"),w=a("132d"),O=a("adda"),T=a("2909"),L=(a("a9e3"),a("d81d"),a("17b3"),a("dc22")),N=a("a9ad"),A=a("de2c"),M=a("7560"),j=a("58df"),D=Object(j["a"])(N["a"],Object(A["a"])({onVisible:["init"]}),M["a"]).extend({name:"v-pagination",directives:{Resize:L["a"]},props:{circle:Boolean,disabled:Boolean,length:{type:Number,default:0,validator:function(t){return t%1===0}},nextIcon:{type:String,default:"$next"},prevIcon:{type:String,default:"$prev"},totalVisible:[Number,String],value:{type:Number,default:0},pageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.page"},currentPageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.currentPage"},previousAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.previous"},nextAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.next"},wrapperAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.wrapper"}},data:function(){return{maxButtons:0,selected:null}},computed:{classes:function(){return Object(m["a"])({"v-pagination":!0,"v-pagination--circle":this.circle,"v-pagination--disabled":this.disabled},this.themeClasses)},items:function(){var t=parseInt(this.totalVisible,10);if(0===t)return[];var e=Math.min(Math.max(0,t)||this.length,Math.max(0,this.maxButtons)||this.length,this.length);if(this.length<=e)return this.range(1,this.length);var a=e%2===0?1:0,i=Math.floor(e/2),n=this.length-i+1+a;if(this.value>i&&this.value<n){var s=1,c=this.length,o=this.value-i+2,r=this.value+i-2-a,l=o-1===s+1?2:"...",u=r+1===c-1?r+1:"...";return[1,l].concat(Object(T["a"])(this.range(o,r)),[u,this.length])}if(this.value===i){var h=this.value+i-1-a;return[].concat(Object(T["a"])(this.range(1,h)),["...",this.length])}if(this.value===n){var d=this.value-i+1;return[1,"..."].concat(Object(T["a"])(this.range(d,this.length)))}return[].concat(Object(T["a"])(this.range(1,i)),["..."],Object(T["a"])(this.range(n,this.length)))}},watch:{value:function(){this.init()}},mounted:function(){this.init()},methods:{init:function(){var t=this;this.selected=null,this.$nextTick(this.onResize),setTimeout((function(){return t.selected=t.value}),100)},onResize:function(){var t=this.$el&&this.$el.parentElement?this.$el.parentElement.clientWidth:window.innerWidth;this.maxButtons=Math.floor((t-96)/42)},next:function(t){t.preventDefault(),this.$emit("input",this.value+1),this.$emit("next")},previous:function(t){t.preventDefault(),this.$emit("input",this.value-1),this.$emit("previous")},range:function(t,e){var a=[];t=t>0?t:1;for(var i=t;i<=e;i++)a.push(i);return a},genIcon:function(t,e,a,i,n){return t("li",[t("button",{staticClass:"v-pagination__navigation",class:{"v-pagination__navigation--disabled":a},attrs:{disabled:a,type:"button","aria-label":n},on:a?{}:{click:i}},[t(b["a"],[e])])])},genItem:function(t,e){var a=this,i=e===this.value&&(this.color||"primary"),n=e===this.value,s=n?this.currentPageAriaLabel:this.pageAriaLabel;return t("button",this.setBackgroundColor(i,{staticClass:"v-pagination__item",class:{"v-pagination__item--active":e===this.value},attrs:{type:"button","aria-current":n,"aria-label":this.$vuetify.lang.t(s,e)},on:{click:function(){return a.$emit("input",e)}}}),[e.toString()])},genItems:function(t){var e=this;return this.items.map((function(a,i){return t("li",{key:i},[isNaN(Number(a))?t("span",{class:"v-pagination__more"},[a.toString()]):e.genItem(t,a)])}))},genList:function(t,e){return t("ul",{directives:[{modifiers:{quiet:!0},name:"resize",value:this.onResize}],class:this.classes},e)}},render:function(t){var e=[this.genIcon(t,this.$vuetify.rtl?this.nextIcon:this.prevIcon,this.value<=1,this.previous,this.$vuetify.lang.t(this.previousAriaLabel)),this.genItems(t),this.genIcon(t,this.$vuetify.rtl?this.prevIcon:this.nextIcon,this.value>=this.length,this.next,this.$vuetify.lang.t(this.nextAriaLabel))];return t("nav",{attrs:{role:"navigation","aria-label":this.$vuetify.lang.t(this.wrapperAriaLabel)}},[this.genList(t,e)])}}),R=a("0fd9"),V=a("8dd9"),E=Object(u["a"])(l,i,n,!1,null,"4d96b782",null);e["default"]=E.exports;d()(E,{VBtn:f["a"],VCard:p["a"],VCardText:v["a"],VCardTitle:v["b"],VCheckbox:C,VChip:k["a"],VCol:$["a"],VContainer:I["a"],VDialog:_["a"],VIcon:w["a"],VImg:O["a"],VPagination:D,VRow:R["a"],VSheet:V["a"]})},cc1d:function(t,e,a){}}]);
//# sourceMappingURL=chunk-4f110caa.e49e40bc.js.map