(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2e6dd8c4"],{"27be":function(t,a,e){"use strict";e("5464")},"2c76":function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-container",{staticStyle:{"max-width":"1136px"}},[e("loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}}),e("Navbar"),e("v-row",{staticClass:"d-flex flex-no-wrap justify-space-between w-100 mt-6"},[e("v-col",{attrs:{cols:"12",sm:"6"}},[e("h2",{staticClass:"font-weight-bold pt-0 pb-8 text-h3"},[t._v(" "+t._s(t.scenic[0].ScenicSpotName||t.scenic[0].RestaurantName)+" ")]),e("p",{staticClass:"py-0 text-h4 grey--text"},[t._v(t._s(t.scenic[0].Class1||"其他"))]),e("div",{staticClass:"d-none d-sm-flex flex-column"},[e("p",{staticClass:"py-0 text-body-1"},[e("i",{staticClass:"fas fa-phone-alt grey--text mr-3"}),t._v(t._s(t.scenic[0].Phone)),e("span",{staticClass:"primary--text ml-3"},[t._v("撥打電話")])]),e("p",{staticClass:"py-0 text-body-1"},[e("i",{staticClass:"fas fa-clock grey--text mr-3"}),t._v(t._s(t.scenic[0].OpenTime)+" ")]),e("p",{staticClass:"py-0 text-body-1"},[e("i",{staticClass:"fas fa-map-marker-alt mr-1 grey--text mr-3"}),t._v(t._s(t.scenic[0].Address)+" ")])])]),e("v-col",{staticClass:"d-flex d-sm-none",attrs:{cols:"12",sm:"6"}},[e("v-img",{staticClass:"rounded-lg",attrs:{height:"300px",src:t.scenic[0].Picture.PictureUrl1||t.scenic[0].Picture.PictureUrl2||t.availableImg}})],1),e("v-col",{staticClass:"d-flex d-sm-none flex-column",attrs:{cols:"12",sm:"6"}},[e("p",{staticClass:"py-0 text-body-1"},[e("i",{staticClass:"fas fa-phone-alt grey--text mr-3"}),t._v(t._s(t.scenic[0].Phone)),e("span",{staticClass:"primary--text ml-3"},[t._v("撥打電話")])]),e("p",{staticClass:"py-0 text-body-1"},[e("i",{staticClass:"fas fa-clock grey--text mr-3"}),t._v(t._s(t.scenic[0].OpenTime)+" ")]),e("p",{staticClass:"py-0 text-body-1"},[e("i",{staticClass:"fas fa-map-marker-alt mr-1 grey--text mr-3"}),t._v(t._s(t.scenic[0].Address)+" ")])]),e("v-col",{staticClass:"d-none d-sm-flex",attrs:{cols:"12",sm:"6"}},[e("v-img",{staticClass:"rounded-lg",attrs:{height:"300px",src:t.scenic[0].Picture.PictureUrl1||t.scenic[0].Picture.PictureUrl2||t.availableImg}})],1)],1),e("v-row",[e("v-col",{attrs:{cols:"12"}},[e("h3",{staticClass:"text-h4 font-weight-bold mb-6"},[t._v("景點介紹")]),e("p",[t._v(" "+t._s(t.scenic[0].DescriptionDetail||t.scenic[0].Description)+" ")])])],1),e("v-row",[e("v-col",{attrs:{cols:"12"}},[e("h3",{staticClass:"text-h4 font-weight-bold mb-6"},[t._v("地圖")])]),e("v-col",{attrs:{cols:"12"}},[e("GmapMap",{staticStyle:{width:"100%",height:"600px"},attrs:{center:t.marker[0].position,zoom:12,options:t.options}},[t._l(t.marker,(function(a,s){return e("GmapMarker",{key:s,attrs:{position:a.position,clickable:!0,draggable:!1},on:{click:function(e){return t.toggleMapInfo(a,s)}}})})),e("GmapInfoWindow",{attrs:{position:t.infoWindowPos,opened:t.infoWinOpen,options:t.infoOptions},on:{closeclick:function(a){t.infoWinOpen=!1}}})],2)],1)],1),e("v-row",{staticClass:"mt-16 mb-13"},[e("v-col",{attrs:{cols:"12",sm:"12"}},[e("h3",{staticClass:"text-h4 font-weight-bold"},[t._v("附近餐飲")])]),t._l(t.getRestaurantThree,(function(a){return e("v-col",{key:a.ID,attrs:{cols:"12",sm:"4"}},[e("v-card",{staticClass:"rounded-lg",attrs:{outlined:"",height:"400px"},on:{click:function(e){return t.getRestaurants(a.RestaurantID)}}},[e("v-img",{attrs:{src:a.Picture.PictureUrl1||a.Picture.PictureUrl2||t.availableImg,height:"250px"}}),e("v-card-text",{staticClass:"primary--text py-2"},[t._v("餐飲")]),e("v-card-title",{staticClass:"font-weight-bold pt-0 pb-8 text-h5"},[t._v(" "+t._s(a.RestaurantName)+" ")]),e("v-card-text",{staticClass:"py-0 text-body-1"},[e("i",{staticClass:"fas fa-map-marker-alt mr-1"}),t._v(t._s(a.Address)+" ")])],1)],1)}))],2),e("Footer")],1)},n=[],i=(e("ac1f"),e("466d"),e("fb6a"),e("5319"),e("d3b7"),e("159b"),e("caad"),e("2532"),e("99af"),e("6c2d")),o=e("cea4"),c=e("9d10"),r={name:"scenePage",components:{Navbar:o["a"],Footer:c["a"]},data:function(){return{id:"",scenic:{},restaurant:[],selectedCity:"",availableImg:"https://picsum.photos/200/200/?random=4",isLoading:!1,options:{mapTypeControl:!1,scaleControl:!1,streetViewControl:!1,fullscreenControl:!1,disableDefaultUI:!1,scrollwheel:!0,clickableIcons:!0},marker:[],infoWindowPos:null,infoWinOpen:!1,currentIndex:null,infoOptions:{maxWidth:300,content:"",pixelOffset:{width:0,height:-40}}}},methods:{getScenicSpot:function(){var t=this,a="https://ptx.transportdata.tw/MOTC/v2/Tourism/ScenicSpot?$filter=ScenicSpotID%20eq%20'".concat(t.id,"'&$top=30&$format=JSON"),e="https://ptx.transportdata.tw/MOTC/v2/Tourism/Restaurant?$filter=RestaurantID%20eq%20'".concat(t.id,"'&$top=30&$format=JSON"),s=/C1_\w+/,n=/C3_\w+/;t.isLoading=!0,t.id.match(s)?t.$http.get(a,{headers:t.getAuthorizationHeader()}).then((function(a){t.scenic=a.data,t.getMarker(a,2),t.selectedCity=a.data[0].City,t.getRestaurant()})):t.id.match(n)&&t.$http.get(e,{headers:t.getAuthorizationHeader()}).then((function(a){t.scenic=a.data,t.getMarker(a,2),t.selectedCity=a.data[0].City,t.getRestaurant()}))},getRestaurant:function(){var t=this,a="https://ptx.transportdata.tw/MOTC/v2/Tourism/Restaurant".concat(t.cityTranslate,"?$format=JSON"),e=/[0-9]/gi,s=t.scenic[0].Address.replace(t.selectedCity,"").replace(e,"").slice(0,3);t.$http.get(a,{headers:t.getAuthorizationHeader()}).then((function(a){a.data.forEach((function(a){a.Address.includes(s),t.restaurant.push(a)})),t.isLoading=!1}))},getRestaurants:function(t){var a="https://ptx.transportdata.tw/MOTC/v2/Tourism/Restaurant?$filter=RestaurantID%20eq%20'".concat(t,"'&$format=JSON"),e=this;e.$http.get(a,{headers:e.getAuthorizationHeader()}).then((function(a){e.scenic=a.data,window.scrollTo({top:0,behavior:"smooth"}),e.$router.push("/scenePage/".concat(t)).catch((function(){}))}))},getAuthorizationHeader:function(){var t="4f650471c3a946078042df58395fa922",a="rMjx-NyfKoXX93I7ZTe59VjoEPM",e=(new Date).toGMTString(),s=new i["a"]("SHA-1","TEXT");s.setHMACKey(a,"TEXT"),s.update("x-date: ".concat(e));var n=s.getHMAC("B64"),o='hmac username="'+t+'", algorithm="hmac-sha1", headers="x-date", signature="'+n+'"';return{Authorization:o,"x-date":e}},getMarker:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,e=this;2===a?t.data.forEach((function(t){t.ScenicSpotName?e.marker.push({position:{lat:t.Position.PositionLat,lng:t.Position.PositionLon},infoText:'<h3 class="primary--text mb-1">'.concat(t.ScenicSpotName,'</h1>\n                        <p class="mb-0">地址： ').concat(t.Address,'</p>\n                        <p class="mb-0">營業時間： ').concat(t.OpenTime,"</p>")}):e.marker.push({position:{lat:t.Position.PositionLat,lng:t.Position.PositionLon},infoText:'<h3 class="primary--text mb-1">'.concat(t.RestaurantName,'</h1>\n                        <p class="mb-0">地址： ').concat(t.Address,'</p>\n                        <p class="mb-0">營業時間： ').concat(t.OpenTime,"</p>")})})):0===a&&e.marker.push({position:{lat:t.Position.PositionLat,lng:t.Position.PositionLon},infoText:'<h3 class="mb-1">'.concat(t.RestaurantName,'</h1>\n                     <p class="mb-0">地址： ').concat(t.Address,'</p>\n                     <p class="mb-0">營業時間： ').concat(t.OpenTime,"</p>")})},toggleMapInfo:function(t,a){var e=this;e.infoWindowPos=t.position,e.infoOptions.content=t.infoText,e.currentIndex===a?e.infoWinOpen=!e.infoWinOpen:(e.infoWinOpen=!0,e.currentIndex=a)}},computed:{cityTranslate:function(){var t=this,a=["臺北市","新北市","桃園市","臺中市","臺南市","高雄市","基隆市","新竹市","新竹縣","苗栗縣","彰化縣","南投縣","雲林縣","嘉義縣","嘉義市","屏東縣","宜蘭縣","花蓮縣","臺東縣","金門縣","澎湖縣","連江縣"],e=["Taipei","NewTaipei","Taoyuan","Taichung","Tainan","Kaohsiung","Keelung","Hsinchu","HsinchuCounty","MiaoliCounty","ChanghuaCounty","NantouCounty","YunlinCounty","ChiayiCounty","Chiayi","PingtungCounty","YilanCounty","HualienCounty","TaitungCounty","KinmenCounty","PenghuCounty","LienchiangCounty"],s=a.indexOf(t.selectedCity);if(""===t.selectedCity)return"/";if(void 0===t.selectedCity){var n=t.scenic[0].Address.slice(0,3),i=a.indexOf(n);return"/"+e[i]}return"/"+e[s]},getRestaurantThree:function(){var t=this,a=t.restaurant.length,e=1,s=Math.floor(Math.random()*(a-e+1)),n=[];return t.restaurant.forEach((function(a,e){e>=s&&e<s+3&&(n.push(a),t.getMarker(a,0))})),n}},created:function(){this.id=this.$route.params.id,this.getScenicSpot()}},l=r,u=(e("27be"),e("2877")),d=e("6544"),p=e.n(d),h=e("b0af"),f=e("99d9"),m=e("62ad"),g=e("a523"),C=e("adda"),v=e("0fd9"),x=Object(u["a"])(l,s,n,!1,null,"62f1202f",null);a["default"]=x.exports;p()(x,{VCard:h["a"],VCardText:f["a"],VCardTitle:f["b"],VCol:m["a"],VContainer:g["a"],VImg:C["a"],VRow:v["a"]})},5464:function(t,a,e){}}]);
//# sourceMappingURL=chunk-2e6dd8c4.3c6b997f.js.map